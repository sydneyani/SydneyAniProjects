import{a as p}from"./axios-3a76d256.js";import{_ as m,o as u,c as _,a as s,w as i,v as c,b as d,p as g,d as h}from"./index-458bac09.js";const b={data(){return{email:"",password:""}},methods:{async login(){try{const t=await p.post("https://todays-vision-e4hm.onrender.com/login",{email:this.email,password:this.password}),e=t.data.token,r=t.data.user;localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("userRole",r.role),console.log("User role stored:",r.role),r.role=="employee"?this.$router.push("/"):this.$router.push("/chart")}catch(t){console.error("Login failed:",t);const e=document.getElementById("status_display");e.textContent=t.response.data.message}}}},a=t=>(g("data-v-ccbb5e91"),t=t(),h(),t),f={class:"container"},y={class:"row justify-content-center align-items-center"},v={class:"col-md-4"},w=a(()=>s("h2",{class:"text-center"},"Login",-1)),k={class:"form-group"},x=a(()=>s("label",{for:"email"},"Email",-1)),I={class:"form-group"},S=a(()=>s("label",{for:"password"},"Password",-1)),E=a(()=>s("p",{id:"status_display"},null,-1));function B(t,e,r,U,n,l){return u(),_("div",f,[s("div",y,[s("div",v,[s("form",null,[w,s("div",k,[x,i(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>n.email=o),class:"form-control",id:"email",placeholder:"Enter Email"},null,512),[[c,n.email]])]),s("div",I,[S,i(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=o=>n.password=o),class:"form-control",id:"password",placeholder:"Enter password"},null,512),[[c,n.password]])]),s("button",{onClick:e[2]||(e[2]=d((...o)=>l.login&&l.login(...o),["prevent"])),type:"submit",class:"btn btn-primary btn-block custom-margin-right"},"Login"),s("button",{onClick:e[3]||(e[3]=d(o=>this.$router.push("/signup"),["prevent"])),type:"submit",class:"btn btn-primary btn-block"},"Sign Up"),E])])])])}const V=m(b,[["render",B],["__scopeId","data-v-ccbb5e91"]]);export{V as default};
